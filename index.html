<!DOCTYPE HTML>
<!--
	Typify by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>ColorScope by CSP</title>
		<lang="pt-br" />
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">

 		 <script src="http://code.jquery.com/jquery-1.10.2.js"></script>

  		<script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  		<script>

			var all_data={coordinates:[

				[404,0,447,474,20]
				,[424,231,357,225,5]
				,[357,225,345,286,5]
				,[313,132,357,225,5]
				,[313,132,266,299,5]
				,[266,299,280,238,5]
				,[258,0,313,132,5]
				,[271,393,251,151,5]
				,[251,151,266,299,5]

				]};

			var img;

 			 $(function() {

		   $( "#slider-range" ).slider({

		      range: true,

		      min: 0,

		      max: 100,

		      values: [ 1, 10 ],

		      slide: function( event, ui ) {

		        $( "#amount" ).val( ui.values[ 0 ] +"m - "+ ui.values[ 1 ] +"m" );


			        filtered_data = [];
			        width = 4;

			        $.each(all_data.coordinates, function(i, val){
			        	if(ui.values[ 0 ] <= val[width]  && val[width] <= ui.values[ 1 ]){
							filtered_data.push(val);		        		
			        	} 
			        });

			        ctx.drawImage(img,0,0, mapWidth, mapHeight);
			        drawMapLines(filtered_data);

		      }

		    });

		    $( "#amount" ).val( $( "#slider-range" ).slider( "values", 0 ) + 'm -' +

		       $( "#slider-range" ).slider( "values", 1 )  + 'm');

		  });

  			</script>

	</head>
	<body>
			<!-- Header -->
			<header id="header" class="alt">
				<style>
				ul {
    				list-style-type: none;
    				margin: 0;
    				padding: 0;
				}

				li {
    				display: inline;
				}

				a {
     				display: block;
    			 	padding-right: 10px;
 			}
				</style>
				<nav id="nav">
					<ul class="actions" style="float:right" stlye="display:inline">
						<li><a href="#one"  style="color:white;" style="padding:8px;">How To</a></li>
						<li><a href="#three"  style="color:white;" style="padding:8px;">Our Mission</a></li>
						<li><a href="#five" style="color:white;" style="padding:8px">About Us</a></li>
						<li><a href="#four" style="color:white;" style="padding:8px">Contact Us</a></li>
					</ul>
				</nav>


		<!-- Banner -->
			<section id="banner">
			<head>
				<style>
				div.fixed{
					position: fixed;
				}
				</style>
				<h1>
						<postion:"fixed"><img src="MobiLabLogoFinal.PNG" alt="ColorScope" style="border: double; white;"></h1>
			</div>
				<p style="text-transform: lowercase; font-size:18px; color:white"><i> an app to support planning of urban mobility infrastructure </i></p>
				<p style="font-size:25px"><strong>Brought to you by CSP</strong></p>
				<ul class="actions">
					<li><a href="#two" class="button special">Get coloring!</a></li>
				</ul>
			</section>

		<!-- One -->
			<section id="one" class="wrapper special">
				<div class="inner">
					<header class="major">
						<h2 style="font-size:30px"> How ColorScoPe Works </h2>
					</header>
					<div class="features">
						<div class="feature">
							<i class="fa fa-diamond"></i>
							<h3>Step 1</h3>
							<p>An urban area is identified to need infrastructural support.</p>
						</div>
						<div class="feature">
							<i class="fa fa-copy"></i>
							<h3>Step 2</h3>
							<p>The approved aerial image of the area is uploaded to ColorScope.</p>
						</div>
						<div class="feature">
							<i class="fa fa-paper-plane-o"></i>
							<h3>Step 3</h3>
							<p>CSP’s unique image processing algorithm measures the road widths.</p>
						</div>
						<div class="feature">
							<i class="fa fa-save"></i>
							<h3>Step 4</h3>
							<p>A user controlled custom filter highlights roads of certain widths.</p>
						</div>
						<div class="feature">
							<i class="fa fa-envelope-o"></i>
							<h3>Step 5</h3>
							<p>Traffic chokepoints, overly narrowed bus lanes, etc can be identified and rectified.</p>
						</div>
					</div>
				</div>
			</section>

		<!-- Two -->
			<section id="two" class="wrapper style2 special">
				<div class="inner narrow">
					<header>
						<h2>Color São Paulo</h2>
					</header>
					<p>Upload an approved map image by using the "Choose File" button below and selecting a width filter:</p>

					<input type="file" id="imageLoader" name="imageLoader"/>
					<canvas id="imageCanvas" style="border:10px solid #d3d3d3;"></canvas>

					<script>
						var imageLoader = document.getElementById('imageLoader');
    					imageLoader.addEventListener('change', handleImage, false);
						var canvas = document.getElementById('imageCanvas');
						var ctx = canvas.getContext('2d');

						var mapWidth = 650;
						var mapHeight = 700;

		
						function handleImage(e, data){

						    ctx.clearRect(0, 0, canvas.width, canvas.height);
						    var reader = new FileReader();
						    reader.onload = function(event){
						        img = new Image();
						        img.onload = function(){
						        	canvas.width = mapWidth;
						            canvas.height = mapHeight;

		            			ctx.drawImage(img,0,0, mapWidth, mapHeight);

						    if(typeof data === 'undefined'){
					 			 /*$.ajax({
					 			 	url: "http://localhost:8000/colorscope/upload/",
					 			 	method:"POST",
					 			 	dataType:"jsonp",
					 			 	data: $("imageLoader").attr("value"),
					 			    async: false,
					 			 	success:function(answer){
					 			 		console.log(answer);
					 			 		all_data = answer;
					 			 	}
					 			 });*/

								data = all_data;						   
							 }

		            			var coordinates = data.coordinates;
		            			drawMapLines(coordinates);
		        				}

		        			img.src = event.target.result;

		    				}
		    				reader.readAsDataURL(e.target.files[0]);     
						}

						function drawMapLines(coordinates){
							//indexes
							x0 = 0;
							y0 = 1;
							x1 = 2;
							y1 = 3;
							width = 4;

							for(i in coordinates){

							//the 4 is a filler for the filter parameter that the user will choose
							
									ctx.beginPath();
									ctx.moveTo(coordinates[i][x0],coordinates[i][y0]);
									ctx.lineTo(coordinates[i][x1], coordinates[i][y1]);
									ctx.lineWidth=coordinates[i][width];
									ctx.strokeStyle = '#6A5ACD';
									ctx.stroke();
							
							}
						}
					</script>
				</div>
				<p id="sliderlabel">

				  <label for="amount">Desired Street Width:</label>

				  <input type="text" id="amount" readonly style="border:0; color:#f6931f; font-weight:bold;">

				</p>

				<div id="slider-range"></div>
			</section>

		<!-- Three -->
			<section id="three" class="wrapper">
				<div class="inner">

					<h2 id="content" style="font-size: 25px;">Our Mission</h2>
					<p style="color: #47476b; font-family: Arial, Helvetica, serif; font-size: 15px"> 
						ColorScope's Mission is to support up-to-date spatial planning through the use of aerial images for the provision of urban services and safety in São Paulo, specifically designed for the local metropolitan level. We are dedicated to providing tools for innovative and effective urban management to address city-users' needs and maintain a vision of integration, connnectedness, and sustainability in the modern world. </p>
					<div class="row">
						<div class="6u 12u$(small)">
							<h3 style="font-size: 22px;">The Context</h3>
							<p style="color: #47476b; font-family: Arial, Helvetica, serif; font-size: 15px">Creating and maintaining effective transportation infrastructure is a major issue for the city of São Paulo where roughly 1 million cars enter the city daily. ColorScope literally highlights the existing status of road infrastructure. It further simplifies a cluttered aerial image and allows for a flexible, in-depth look at the road infrastructure of the city. </p>
						</div>
						<div class="6u$ 12u$(small)">
							<h3 style="font-size: 22px">Implications on Infrastructure</h3>
							<p style="color:#47476b; font-family: Arial, Helvetica, serif; font-size: 15px">Filtering the map by street width allows the city to better understand its traffic problems. Widening roads can resolve bottlenecks, provide faster bus transport times, etc. Narrowing roads allows for decreased vehicle speeds, essential for increasing saftey in residential areas and widening sidewalks for increased pedestrian access.</p>
						</div>
						<div class="4u 12u$(medium)">
							<h3 style="font-size: 22px;">Why road width?</h3>
							<p style="color: #47476b; font-family: Arial, Helvetica, serif; font-size: 14px">Well-planned cities show higher levels of land allocated for streets and number of street intersections. supporting that the width of roads is a vital aspect of urban planning. (Source: "The Relevance of Street Patterns and Public Space in Urban Areas." UN-Habitat. UN-Habitat, 2013. Web. 13 Jan. 2016.)
								</p>
						</div>
						<div class="4u 12u$(medium)">
							<h3 style="font-size: 22px;">Current Projects</h3>
							<p style="color: #47476b; font-family: Arial, Helvetica, serif; font-size: 14px">The Mario Covas Rodoanel Beltway, a São Paulo metropolitan ring road, provides a way for vehicles to circumnavigate the inner city area and thus reduces traffic congestion. (Source: www.newgeography.com) </p>
						</div>
						<div class="4u$ 12u$(medium)">
							<h3 style="font-size: 22px;">Future Steps</h3>
							<p style="color: #47476b; font-family: Arial, Helvetica, serif; font-size: 14px" > ColorScoPe can be updated to show newly constructed roads, by uploading an aerial image for the background. Additionally, acknowledging which vehicles utilize certain roads most frequently can further specify appropriate actions to improve mobility. Future features could also include detection of paved and unpaved streets, broadening the area of analysis, and presence of sidewalks, good lighting and more. </p>
						</div>
					</div>
				</div>
			</section>

		<!-- Five -->
		<section id="five" class="wrapper">
			<div class="inner">
				<h3>About Us</h3>
							<span class="image fit"><img src="IMG_4113.JPG" alt="" /></span>
							<h4>Left &amp; Right</h4>
							<p><span class="image left"><img src="IMG_4076.JPG" alt="" /></span>Lorem ipsum dolor sit accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Vestibulum ante ipsum primis in faucibus magna blandit adipiscing eu felis iaculis volutpat lorem ipsum dolor sit amet dolor consequat.</p>
							<p><span class="image right"><img src="img_4097.jpg" alt="" /></span>Lorem ipsum dolor sit accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Vestibulum ante ipsum primis in faucibus magna blandit adipiscing eu felis iaculis volutpat lorem ipsum dolor sit amet dolor consequat.</p>

							<p><span class="image left"><img src="IMG_4112.JPG" alt="" /></span>Lorem ipsum dolor sit accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent. Vestibulum ante ipsum primis in faucibus magna blandit adipiscing eu felis iaculis volutpat lorem ipsum dolor sit amet dolor consequat.</p>

							<h3>Box</h3>
							<div class="box">
								<p>Felis sagittis eget tempus primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Magna sed etiam ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus lorem ipsum dolor sit amet nullam.</p>
							</div>			

		<!-- Four -->
			<section id="four" class="wrapper style2 special">
				<div class="inner">


							<h3>Contact Us</h3>
							<form method="post" action="#">
								<div class="row uniform">
									<div class="6u 12u$(xsmall)">
										<input type="text" name="name" id="name" value="" placeholder="Name" />
									</div>
									<div class="6u$ 12u$(xsmall)">
										<input type="email" name="email" id="email" value="" placeholder="Email" />
									</div>
									<div class="12u$">
										<div class="select-wrapper">
										</div>
									</div>
									<div class="4u 12u$(small)">
										<input type="radio" id="priority-low" name="priority" checked>
										<label for="priority-low">Low Priority</label>
									</div>
									<div class="4u 12u$(small)">
										<input type="radio" id="priority-normal" name="priority">
										<label for="priority-normal">Normal Priority</label>
									</div>
									<div class="4u$ 12u$(small)">
										<input type="radio" id="priority-high" name="priority">
										<label for="priority-high">High Priority</label>
									</div>
									<div class="6u 12u$(small)">
										<input type="checkbox" id="copy" name="copy">
										<label for="copy">Email me a copy of this message</label>
									</div>
									<div class="6u$ 12u$(small)">
										<input type="checkbox" id="human" name="human" checked>
										<label for="human">I am a human and not a robot</label>
									</div>
									<div class="12u$">
										<textarea name="message" id="message" placeholder="Enter your message" rows="6"></textarea>
									</div>
									<div class="12u$">
										<ul class="actions">
											<li><input type="button" value="Send Message" onclick="location.href ='https://www.youtube.com/watch?v=dQw4w9WgXcQ'"/></li>
											<li><input type="reset" value="Reset" class="alt" /></li>
										</ul>
									</div>
								</div>
							</form>

							<hr />	

		<!-- Footer -->
			<footer id="footer">
				<div class="copyright">
					&copy; Harvard-MobiLab 2016. Design: <a href="http://templated.co/">TEMPLATED</a>.
				</div>
			</footer>

		<!-- Scripts -->
	</body>
</html>